<!DOCTYPE html>
<html>
  <head>
    <title>Your App</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <--- Thư viện GIS
  </head>
  <body>
    <div id="g-sign-in-wrapper">
      <div id="g-sign-in-button"></div>
      <--- Nút đăng nhập
    </div>

    <div id="message"></div>

    <script>
      function handleCredentialResponse(response) {
        // Xác thực credential
        google.script.run
          .withSuccessHandler((message) => {
            // Xử lý sau khi xác thực thành công
            document.getElementById("message").innerText = message;
            // Gọi hàm copySpreadsheetAndScripts()
            google.script.run.copySpreadsheetAndScripts();
          })
          .verifyCredential(response.credential);
      }
      window.onload = function () {
        google.accounts.id.initialize({
          client_id:
            "153083226508-qmlv5ko26irv72rrshs6g2i3vnr4d1g4.apps.googleusercontent.com",
          callback: handleCredentialResponse,
        });
        google.accounts.id.renderButton(
          document.getElementById("g-sign-in-button"),
          { theme: "outline", size: "large" } // customization attributes
        );
        google.accounts.id.prompt(); // also display the One Tap dialog
      };

      function displayMessage(message) {
        document.getElementById("message").innerText = message;
        google.script.run.copySpreadsheetAndScripts();
      }
    </script>
  </body>
</html>
